= CPU and Memory Hotplug
:revdate: 2025-09-16
:page-revdate: {revdate}

{harvester-product-name} supports CPU and memory hotplug for virtual machines. This feature allows you to increase the CPU and memory resources of a running virtual machine without requiring a reboot.

[NOTE]
====
ARM64 architecture only supports memory hotplug. CPU hotplug operations require you to restart the virtual machine.
====

== Enable CPU and memory hotplug during virtual machine creation

. On the *Virtual Machine:Create* screen, specify the number of CPU cores and memory to be allocated.
+
image::vm/enable-cpu-and-memory-hotplug.png[Enabling CPU and memory hotplug]

. Select *Enable CPU and memory hotplug*.
+
{harvester-product-name} automatically populates the *Maximum CPU* and *Maximum Memory* fields based on the `max-hotplug-ratio` setting. These values represent the maximum amount of CPU and memory resources that are available to the virtual machine during runtime. You can change these values, if necessary.

. Complete the rest of the virtual machine creation steps.

== Trigger CPU and Memory Hotplug Action

. After the virtual machine is created, you can dynamically add CPU and memory resources using the *Edit CPU and Memory* button.
+
image::vm/edit-cpu-and-memory.png[Increasing CPU and memory resources]

. Click *Apply* to xref:./live-migration#_prerequisites[migrates the virtual machine] to a node with the configured CPU and memory amounts.

NOTE: The virtual machine must be xref:../virtual-machines/live-migration.adoc#_live_migratable_virtual_machines[live-migratable].

== `max-hotplug-ratio` setting

xref:installation-setup/config/settings.adoc#_max_hotplug_ratio[`max-hotplug-ratio`] is a global setting that determines the default maximum amount of CPU and memory resources that are available to a running virtual machine. This ratio is multiplied by the amount of CPU and memory resources that you allocated when you created the virtual machine.

[sidebar]
Maximum available resource at runtime = (Resource allocated during virtual machine creation) x (`max-hotplug-ratio` value)

You can specify a value from `1` to `20`. The default value is `4`.

Example:

The `max-hotplug-ratio` is set to `4`.

|===
| Resource | Allocated Amount | Maximum Available Amount

| CPU cores
| `1`
| `4`

| Memory (Gi)
| `2`
| `8`
|===

image::vm/edit-max-hotplug-ratio.png[max-hotplug-ratio setting]