= {rancher-short-name} vCluster (Experimental)
:revdate: 2025-12-31
:page-revdate: {revdate}

[NOTE]
====
*rancher-vcluster* is an *experimental* add-on. It is not included in the ISO, but you can download it from the https://github.com/harvester/experimental-addons[`experimental-addons` repository]. For more information about experimental features, see xref:introduction/document-conventions.adoc#_feature_labels[Feature Labels].
====

The *rancher-vcluster* add-on allows you to run {rancher-short-name} as a workload on the underlying {harvester-product-name} cluster and is implemented using https://www.vcluster.com/[vCluster].

The add-on runs a nested K3s cluster in the `rancher-vcluster` namespace and deploys {rancher-short-name} to this cluster.

During the installation, the ingress for {rancher-short-name} is synced to the {harvester-product-name} cluster, allowing end users to access {rancher-short-name}.

== Installing the add-on

If you are using the {harvester-product-name} kubeconfig file, you can install the add-on by running the following command:

[,shell]
----
kubectl apply -f https://raw.githubusercontent.com/harvester/experimental-addons/main/rancher-vcluster/rancher-vcluster.yaml
----

== Configuring the add-on

After installation, configure the add-on using the {harvester-product-name} UI.

. Go to *Advanced -> Add-ons*.

. Locate the *rancher-vcluster* add-on, and then select *â‹® -> Edit Config*.
+
image::rancher-vcluster/VclusterConfig.png[]

. In the *Hostname* field, enter a valid DNS record pointing to the {harvester-product-name} VIP. This is essential as the vcluster ingress is synced to the parent {harvester-product-name} cluster. A valid hostname is used to filter ingress traffic to the vcluster workload.

. In the *Bootstrap Password* field, enter the bootstrap password for the new {rancher-short-name} deployed on the vcluster.

Once the add-on is deployed, {rancher-short-name} can take a few minutes to become available.

You can then access {rancher-short-name} via the hostname DNS record that you provided.

See xref:integrations/rancher/virtualization-management.adoc[{rancher-short-name} Integration] for more information.

[NOTE]
====
The add-on is deployed on a `vcluster` Statefulset that uses a Longhorn PVC named `data-rancher-vcluster-0`.

When you disable the add-on, the PVC remains in the `rancher-vcluster` namespace. If you enable the add-on again, the PVC is reused and {rancher-short-name}'s previous state is restored.

If you want to wipe the data, ensure that the PVC is deleted.
====

== Troubleshooting

See xref:troubleshooting/rancher.adoc#_importing_of_harvester_clusters_into_rancher[Importing of {harvester-product-name} clusters into {rancher-short-name}].